<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–†–∞–¥–∏–æ –û–Ω–ª–∞–π–Ω</title>
  <style>
    /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–æ–≤ */
    :root {
      --color-dark-bg: #0a0f21;
      --color-dark-text: #b0c4ff;
      --color-dark-accent: #2f61ff;
      --color-dark-shadow: #1e2a5b;

      --color-light-bg: #f0f4ff;
      --color-light-text: #0a0f21;
      --color-light-accent: #4169e1;
      --color-light-shadow: #a1b3e5;

      --radius: 12px;
      --transition: 0.3s ease;
    }

    body {
      margin: 0; padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--color-dark-bg);
      color: var(--color-dark-text);
      overflow: hidden;
      user-select: none;
      transition: background-color var(--transition), color var(--transition);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    body.light {
      background-color: var(--color-light-bg);
      color: var(--color-light-text);
    }

    .radio-container {
      background: var(--color-dark-shadow);
      border-radius: var(--radius);
      box-shadow: 0 0 20px var(--color-dark-accent);
      width: 320px;
      padding: 25px 30px 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      transition: background-color var(--transition), box-shadow var(--transition);
      position: relative;
    }

    body.light .radio-container {
      background: var(--color-light-shadow);
      box-shadow: 0 0 20px var(--color-light-accent);
    }

    h1 {
      font-weight: 700;
      font-size: 1.7rem;
      margin-bottom: 0;
      user-select: none;
      text-align: center;
    }

    /* –ö–Ω–æ–ø–∫–∞ –≤–∫–ª/–≤—ã–∫–ª */
    #powerBtn {
      background: transparent;
      border: 3px solid var(--color-dark-accent);
      border-radius: 50%;
      width: 65px;
      height: 65px;
      cursor: pointer;
      position: relative;
      box-shadow: 0 0 12px var(--color-dark-accent);
      transition: background-color var(--transition), border-color var(--transition), box-shadow var(--transition);
      outline: none;
    }

    #powerBtn::after {
      content: "";
      position: absolute;
      top: 12px; left: 50%;
      transform: translateX(-50%);
      width: 8px;
      height: 28px;
      background: var(--color-dark-accent);
      border-radius: 4px;
      transition: background-color var(--transition);
    }

    #powerBtn.active {
      background: var(--color-dark-accent);
      border-color: var(--color-dark-accent);
      box-shadow: 0 0 24px var(--color-dark-accent);
    }

    #powerBtn.active::after {
      background: var(--color-dark-bg);
    }

    body.light #powerBtn {
      border-color: var(--color-light-accent);
      box-shadow: 0 0 12px var(--color-light-accent);
    }

    body.light #powerBtn::after {
      background: var(--color-light-accent);
    }

    body.light #powerBtn.active {
      background: var(--color-light-accent);
      border-color: var(--color-light-accent);
      box-shadow: 0 0 24px var(--color-light-accent);
    }

    body.light #powerBtn.active::after {
      background: var(--color-light-bg);
    }

    /* –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ */
    .channels {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 15px;
      max-height: 220px;
      overflow-y: auto;
      padding-right: 6px;
      user-select: none;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è scrollbar */
    .channels::-webkit-scrollbar {
      width: 6px;
    }
    .channels::-webkit-scrollbar-track {
      background: transparent;
    }
    .channels::-webkit-scrollbar-thumb {
      background: var(--color-dark-accent);
      border-radius: 3px;
      transition: background-color var(--transition);
    }
    body.light .channels::-webkit-scrollbar-thumb {
      background: var(--color-light-accent);
    }

    /* –ö–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª */
    .channel {
      padding: 10px 18px;
      background: var(--color-dark-bg);
      border-radius: var(--radius);
      cursor: pointer;
      box-shadow: 0 0 6px transparent;
      transition: box-shadow var(--transition), background-color var(--transition), color var(--transition);
      display: flex;
      align-items: center;
      gap: 14px;
      user-select: none;
      position: relative;
    }

    body.light .channel {
      background: var(--color-light-bg);
    }

    .channel:hover {
      box-shadow: 0 0 15px var(--color-dark-accent);
      background: #1224ff22;
    }

    body.light .channel:hover {
      box-shadow: 0 0 15px var(--color-light-accent);
      background: #4169e133;
    }

    .channel.active {
      box-shadow: 0 0 18px var(--color-dark-accent);
      background: var(--color-dark-accent);
      color: #000;
      font-weight: 700;
    }

    body.light .channel.active {
      box-shadow: 0 0 18px var(--color-light-accent);
      background: var(--color-light-accent);
      color: #fff;
    }

    /* –ö—Ä—É–≥–ª—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–∞–Ω—Ç–µ–Ω–Ω–∞" */
    .antenna {
      position: absolute;
      top: 15px;
      right: 15px;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: #00ff0044;
      box-shadow: 0 0 6px #00ff00aa;
      animation: antennaPulse 2s infinite ease-in-out;
      pointer-events: none;
    }

    @keyframes antennaPulse {
      0%, 100% { box-shadow: 0 0 6px #00ff00aa; background: #00ff0044; }
      50% { box-shadow: 0 0 16px #00ff00ee; background: #00ff00bb; }
    }

    body.light .antenna {
      background: #4169e144;
      box-shadow: 0 0 6px #4169e1aa;
      animation-name: antennaPulseLight;
    }

    @keyframes antennaPulseLight {
      0%, 100% { box-shadow: 0 0 6px #4169e1aa; background: #4169e144; }
      50% { box-shadow: 0 0 16px #4169e1ee; background: #4169e1bb; }
    }

    /* –ö—Ä—É—Ç–∏–ª–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤ */
    .dial {
      margin-top: 10px;
      width: 140px;
      height: 140px;
      background: var(--color-dark-bg);
      border-radius: 50%;
      box-shadow: inset 0 0 25px #001166cc, 0 0 30px var(--color-dark-accent);
      cursor: grab;
      user-select: none;
      position: relative;
      transition: background-color var(--transition), box-shadow var(--transition);
    }

    body.light .dial {
      background: var(--color-light-bg);
      box-shadow: inset 0 0 25px #aaccffcc, 0 0 30px var(--color-light-accent);
    }

    .dial:active {
      cursor: grabbing;
    }

    /* –ú–∞—Ä–∫–µ—Ä –Ω–∞ –∫—Ä—É—Ç–∏–ª–∫–µ */
    .dial-marker {
      position: absolute;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      width: 8px;
      height: 30px;
      background: var(--color-dark-accent);
      border-radius: 4px;
      box-shadow: 0 0 12px var(--color-dark-accent);
      transition: background-color var(--transition);
    }

    body.light .dial-marker {
      background: var(--color-light-accent);
      box-shadow: 0 0 12px var(--color-light-accent);
    }

    /* –õ–∞–º–ø–æ—á–∫–∞ */
    .lamp {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #ffdd0044;
      box-shadow: 0 0 15px #ffdd0055;
      animation: lampBlink 3s infinite;
      margin-top: 10px;
    }

    @keyframes lampBlink {
      0%, 50%, 100% { opacity: 1; }
      25%, 75% { opacity: 0.4; }
    }

    /* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã */
    #themeToggle {
      position: absolute;
      top: 10px;
      left: 10px;
      background: transparent;
      border: none;
      cursor: pointer;
      color: inherit;
      font-size: 1.3rem;
      user-select: none;
      transition: color var(--transition);
    }

    #themeToggle:hover {
      color: var(--color-dark-accent);
    }

    body.light #themeToggle:hover {
      color: var(--color-light-accent);
    }

    /* –ó–≤—É–∫–∏ –∫–Ω–æ–ø–æ–∫ (—Å–∫—Ä—ã—Ç–æ) */
    audio {
      display: none;
    }

  </style>
</head>
<body>

  <button id="themeToggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåô</button>

  <div class="radio-container" role="main" aria-label="–ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–¥–∏–æ">
    <h1>–†–∞–¥–∏–æ –û–Ω–ª–∞–π–Ω</h1>

    <button id="powerBtn" aria-pressed="false" aria-label="–í–∫–ª—é—á–∏—Ç—å —Ä–∞–¥–∏–æ"></button>
    <div class="antenna" aria-hidden="true"></div>

    <div class="channels" tabindex="0" aria-label="–°–ø–∏—Å–æ–∫ —Ä–∞–¥–∏–æ–∫–∞–Ω–∞–ª–æ–≤">
      <!-- –ö–∞–Ω–∞–ª—ã –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç–æ–º -->
    </div>

    <div class="dial" aria-label="–ö—Ä—É—Ç–∏–ª–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤" role="slider" tabindex="0" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
      <div class="dial-marker"></div>
    </div>

    <div class="lamp" aria-hidden="true"></div>
  </div>

  <!-- –ó–≤—É–∫–∏ -->
  <audio id="soundClick" src="https://actions.google.com/sounds/v1/buttons/button_click.ogg" preload="auto"></audio>
  <audio id="soundSwitch" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>

<script>
  // –î–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª–æ–≤ ‚Äî –∑–¥–µ—Å—å –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å –ø–æ—Ç–æ–∫–∏
  const channels = [
    {
      name: '–ï–≤—Ä–æ–ø–∞ –ü–ª—é—Å',
      stream: 'https://ep128.hostingradio.ru:8050/ep128_mp3',
      color: '#2f61ff'
    },
    {
      name: '–†—É—Å—Å–∫–æ–µ –†–∞–¥–∏–æ',
      stream: 'https://air.rusradio.ru:8000/rusradio128',
      color: '#ff2f2f'
    },
    {
      name: '–ê–≤—Ç–æ—Ä–∞–¥–∏–æ',
      stream: 'https://air.autoradio.ru:8000/autoradio128',
      color: '#2fff87'
    },
    {
      name: '–î–æ—Ä–æ–∂–Ω–æ–µ –†–∞–¥–∏–æ',
      stream: 'https://dorognoe.hostingradio.ru/dorognoe128.mp3',
      color: '#ffb32f'
    },
    {
      name: '–ù–∞—à–µ –†–∞–¥–∏–æ',
      stream: 'https://nashe1.hostingradio.ru:8050/nashe128.mp3',
      color: '#ff61ff'
    },
    {
      name: 'Love Radio',
      stream: 'https://lovenet.hostingradio.ru:8050/lovenet128.mp3',
      color: '#ff6a6a'
    },
  ];

  const radioContainer = document.querySelector('.radio-container');
  const channelsEl = document.querySelector('.channels');
  const powerBtn = document.getElementById('powerBtn');
  const dial = document.querySelector('.dial');
  const dialMarker = dial.querySelector('.dial-marker');
  const soundClick = document.getElementById('soundClick');
  const soundSwitch = document.getElementById('soundSwitch');
  const themeToggle = document.getElementById('themeToggle');

  let audio = new Audio();
  let isPlaying = false;
  let currentChannelIndex = 0;
  let dialRotation = 0;
  let isDragging = false;
  let dragStartX = 0;
  let dialStartRotation = 0;
  let isLightTheme = false;

  // –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –≤ DOM
  function renderChannels() {
    channelsEl.innerHTML = '';
    channels.forEach((ch, i) => {
      const div = document.createElement('div');
      div.className = 'channel';
      div.textContent = ch.name;
      div.style.borderLeft = `6px solid ${ch.color}`;
      div.setAttribute('data-index', i);
      if(i === currentChannelIndex) div.classList.add('active');
      channelsEl.appendChild(div);

      div.addEventListener('click', () => {
        if(currentChannelIndex !== i) {
          switchChannel(i);
          playSound(soundClick);
        }
      });
    });
  }

  // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ
  function playAudio() {
    if(!isPlaying) return;
    audio.play().catch(e => console.warn('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è', e));
  }

  // –ü–∞—É–∑–∞ –∞—É–¥–∏–æ
  function pauseAudio() {
    audio.pause();
  }

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
  function switchChannel(index) {
    if(index < 0 || index >= channels.length) return;
    currentChannelIndex = index;
    audio.src = channels[index].stream;
    audio.crossOrigin = "anonymous";
    audio.load();
    if(isPlaying) playAudio();
    updateUI();
    rotateDialToChannel(index);
  }

  // –û–±–Ω–æ–≤–ª—è–µ–º UI –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞
  function updateUI() {
    document.querySelectorAll('.channel').forEach(ch => ch.classList.remove('active'));
    const activeCh = channelsEl.querySelector(`[data-index="${currentChannelIndex}"]`);
    if(activeCh) activeCh.classList.add('active');
  }

  // –ö—Ä—É—Ç–∏–ª–∫–∞ –ø–æ–≤–æ—Ä–æ—Ç
  function rotateDialToChannel(index) {
    // –£–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞: 360 / –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–∞–ª–æ–≤ * –∏–Ω–¥–µ–∫—Å
    const angle = (360 / channels.length) * index;
    dialRotation = angle;
    dial.style.transform = `rotate(${angle}deg)`;
    dialMarker.style.transform = `translateX(-50%) rotate(${-angle}deg)`;
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫—Ä—É—Ç–∏–ª–∫–∏ (–¥—Ä–∞–≥)
  dial.addEventListener('pointerdown', e => {
    isDragging = true;
    dragStartX = e.clientX;
    dialStartRotation = dialRotation;
    dial.setPointerCapture(e.pointerId);
  });

  dial.addEventListener('pointermove', e => {
    if(!isDragging) return;
    const deltaX = e.clientX - dragStartX;
    // –ú—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤—Ä–∞—â–µ–Ω–∏—è
    dialRotation = dialStartRotation + deltaX * 1.5;
    dial.style.transform = `rotate(${dialRotation}deg)`;
    dialMarker.style.transform = `translateX(-50%) rotate(${-dialRotation}deg)`;
  });

  dial.addEventListener('pointerup', e => {
    if(!isDragging) return;
    isDragging = false;
    dial.releasePointerCapture(e.pointerId);

    // –ü–æ—Å–ª–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–µ–º –±–ª–∏–∂–∞–π—à–∏–π –∫–∞–Ω–∞–ª
    const anglePerChannel = 360 / channels.length;
    let normalizedAngle = dialRotation % 360;
    if(normalizedAngle < 0) normalizedAngle += 360;
    const channelIndex = Math.round(normalizedAngle / anglePerChannel) % channels.length;
    switchChannel(channelIndex);
    playSound(soundSwitch);
  });

  // –ö–Ω–æ–ø–∫–∞ –≤–∫–ª/–≤—ã–∫–ª —Ä–∞–¥–∏–æ
  powerBtn.addEventListener('click', () => {
    if(isPlaying) {
      isPlaying = false;
      pauseAudio();
      powerBtn.classList.remove('active');
      powerBtn.setAttribute('aria-pressed', 'false');
      powerBtn.setAttribute('aria-label', '–í–∫–ª—é—á–∏—Ç—å —Ä–∞–¥–∏–æ');
    } else {
      isPlaying = true;
      playAudio();
      powerBtn.classList.add('active');
      powerBtn.setAttribute('aria-pressed', 'true');
      powerBtn.setAttribute('aria-label', '–í—ã–∫–ª—é—á–∏—Ç—å —Ä–∞–¥–∏–æ');
    }
    playSound(soundClick);
  });

  // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞ –Ω–∞–∂–∞—Ç–∏—è
  function playSound(sound) {
    sound.currentTime = 0;
    sound.volume = 0.1; // –¢–∏—Ö–æ
    sound.play().catch(() => {});
  }

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
  themeToggle.addEventListener('click', () => {
    isLightTheme = !isLightTheme;
    document.body.classList.toggle('light', isLightTheme);
    themeToggle.textContent = isLightTheme ? 'üåû' : 'üåô';
    playSound(soundClick);
  });

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  switchChannel(currentChannelIndex);
  renderChannels();

</script>

</body>
</html>
