<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç –†–∞–¥–∏–æ ‚Äî –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ</title>
<style>
  :root {
    --clr-dark-bg: #0a0a12;
    --clr-dark-text: #00ff88;
    --clr-dark-accent: #00cc66;
    --clr-light-bg: #f5f8ff;
    --clr-light-text: #003344;
    --clr-light-accent: #005577;
    --transition: 0.3s ease;
  }
  /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
  body {
    margin: 0; min-height: 100vh;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: var(--clr-dark-bg);
    color: var(--clr-dark-text);
    display: flex; flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 20px;
    transition: background var(--transition), color var(--transition);
    user-select: none;
  }
  body.light {
    background: var(--clr-light-bg);
    color: var(--clr-light-text);
  }
  h1 {
    font-weight: 900;
    margin-bottom: 0.5em;
    user-select: text;
    text-align: center;
    font-size: 2.2rem;
  }
  /* –†–∞–¥–∏–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
  .radio {
    background: #111;
    border-radius: 15px;
    box-shadow: 0 0 15px #00ff8877;
    max-width: 480px;
    width: 100%;
    padding: 20px 25px;
    display: flex; flex-direction: column;
    gap: 20px;
    transition: background var(--transition), box-shadow var(--transition);
  }
  body.light .radio {
    background: #e8f0ff;
    box-shadow: 0 0 15px #005577aa;
  }
  /* –ö–Ω–æ–ø–∫–∞ –≤–∫–ª/–≤—ã–∫–ª —Ä–∞–¥–∏–æ */
  .btn-power {
    width: 60px; height: 60px;
    border-radius: 50%;
    border: none;
    background: #222;
    box-shadow: 0 0 8px #008855cc inset;
    cursor: pointer;
    position: relative;
    transition: background var(--transition), box-shadow var(--transition);
  }
  .btn-power::before {
    content: '';
    position: absolute;
    top: 12px; left: 27px;
    width: 6px; height: 28px;
    background: var(--clr-dark-accent);
    border-radius: 3px;
    transform-origin: center bottom;
    transform: scaleY(1);
    transition: transform 0.2s ease;
  }
  .btn-power.active {
    background: #00cc66;
    box-shadow: 0 0 15px #00ff88 inset;
  }
  .btn-power.active::before {
    transform: scaleY(0);
  }
  body.light .btn-power {
    background: #ddeeff;
    box-shadow: 0 0 10px #0088cc inset;
  }
  body.light .btn-power.active {
    background: #0055aa;
    box-shadow: 0 0 20px #3399ff inset;
  }
  body.light .btn-power.active::before {
    background: #aad4ff;
  }
  /* –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤ */
  .btn-switch {
    background: transparent;
    border: none;
    color: inherit;
    font-size: 2.8rem;
    font-weight: 700;
    cursor: pointer;
    user-select: none;
    padding: 0 10px;
    transition: color var(--transition);
  }
  .btn-switch:hover {
    color: var(--clr-dark-accent);
  }
  body.light .btn-switch:hover {
    color: var(--clr-light-accent);
  }
  /* –ë–ª–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ */
  .channels {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: 180px;
    overflow-y: auto;
    border: 1px solid #00ff8844;
    border-radius: 10px;
    padding: 10px;
    user-select: none;
    background: #121212;
  }
  body.light .channels {
    border-color: #00559988;
    background: #e6f0ff;
  }
  .channel {
    padding: 8px 14px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: background var(--transition), box-shadow var(--transition);
    position: relative;
  }
  .channel.active {
    background: var(--clr-dark-accent);
    color: #001100;
    font-weight: 700;
    box-shadow: 0 0 10px var(--clr-dark-accent);
  }
  body.light .channel.active {
    background: var(--clr-light-accent);
    color: #f0f9ff;
    box-shadow: 0 0 15px var(--clr-light-accent);
  }
  .channel-color {
    width: 16px; height: 16px;
    border-radius: 50%;
    flex-shrink: 0;
    box-shadow: 0 0 6px #0008 inset;
  }
  /* –¢–µ–∫—É—â–∏–π —Ç—Ä–µ–∫ */
  .track-info {
    margin-top: 10px;
    font-style: italic;
    font-size: 1rem;
    min-height: 24px;
    user-select: text;
  }
  /* –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
  .settings-panel {
    background: #111a;
    backdrop-filter: blur(8px);
    border-radius: 15px;
    padding: 15px 20px;
    max-width: 480px;
    width: 100%;
    display: none;
    flex-direction: column;
    gap: 15px;
    box-shadow: 0 0 12px #00ff88aa;
  }
  body.light .settings-panel {
    background: #dce8ffcc;
    box-shadow: 0 0 12px #3399ffaa;
  }
  .settings-panel.open {
    display: flex;
  }
  .settings-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .settings-header h2 {
    font-weight: 800;
    margin: 0;
    font-size: 1.5rem;
  }
  .settings-close {
    background: transparent;
    border: none;
    font-size: 1.8rem;
    font-weight: 900;
    cursor: pointer;
    color: inherit;
    transition: color var(--transition);
  }
  .settings-close:hover {
    color: var(--clr-dark-accent);
  }
  body.light .settings-close:hover {
    color: var(--clr-light-accent);
  }
  /* –ü–æ–ª–∑—É–Ω–∫–∏ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ */
  .setting-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  label {
    font-weight: 600;
    font-size: 1rem;
    user-select: none;
  }
  input[type=range] {
    width: 100%;
    cursor: pointer;
  }
  input[type=checkbox] {
    cursor: pointer;
    width: 18px; height: 18px;
  }
  /* –¢–æ–≥–≥–ª —Ç–µ–º—ã */
  .theme-toggle {
    position: fixed;
    top: 20px; right: 20px;
    background: #222;
    border: none;
    border-radius: 12px;
    color: var(--clr-dark-accent);
    font-size: 1.6rem;
    padding: 6px 12px;
    cursor: pointer;
    box-shadow: 0 0 8px #00ff88aa;
    transition: background var(--transition), color var(--transition);
    user-select: none;
    z-index: 999;
  }
  body.light .theme-toggle {
    background: #ddeeff;
    color: var(--clr-light-accent);
    box-shadow: 0 0 12px #3399ffaa;
  }
  .theme-toggle:hover {
    background: var(--clr-dark-accent);
    color: #001100;
  }
  body.light .theme-toggle:hover {
    background: var(--clr-light-accent);
    color: #f0f9ff;
  }
  /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ */
  .btn-power.active,
  .btn-switch:focus,
  .channel.active {
    outline: 2px solid var(--clr-dark-accent);
    outline-offset: 3px;
  }
  body.light .btn-power.active,
  body.light .btn-switch:focus,
  body.light .channel.active {
    outline-color: var(--clr-light-accent);
  }
  /* –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫ */
  button:active {
    transform: scale(0.95);
    transition: transform 0.1s ease;
  }
  /* Scrollbar –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ */
  .channels::-webkit-scrollbar {
    width: 8px;
  }
  .channels::-webkit-scrollbar-thumb {
    background: var(--clr-dark-accent);
    border-radius: 10px;
  }
  body.light .channels::-webkit-scrollbar-thumb {
    background: var(--clr-light-accent);
  }
</style>
</head>
<body>

<button class="theme-toggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåô</button>

<div class="radio" role="region" aria-label="–ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–¥–∏–æ">
  <h1>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç –†–∞–¥–∏–æ</h1>
  <div style="display:flex; justify-content:center; align-items:center; gap:15px;">
    <button class="btn-switch" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –∫–∞–Ω–∞–ª" title="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –∫–∞–Ω–∞–ª">‚èÆÔ∏è</button>
    <button class="btn-power" aria-pressed="false" aria-label="–í–∫–ª—é—á–∏—Ç—å —Ä–∞–¥–∏–æ"></button>
    <button class="btn-switch" aria-label="–°–ª–µ–¥—É—é—â–∏–π –∫–∞–Ω–∞–ª" title="–°–ª–µ–¥—É—é—â–∏–π –∫–∞–Ω–∞–ª">‚è≠Ô∏è</button>
  </div>
  <div class="channels" tabindex="0" aria-label="–°–ø–∏—Å–æ–∫ —Ä–∞–¥–∏–æ–∫–∞–Ω–∞–ª–æ–≤" role="list">
    <!-- –ö–∞–Ω–∞–ª—ã –≤—Å—Ç–∞–≤—è—Ç—Å—è —Å—é–¥–∞ -->
  </div>
  <div class="track-info" aria-live="polite" aria-atomic="true"></div>
</div>

<div class="settings-panel" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–¥–∏–æ" role="region">
  <div class="settings-header">
    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
    <button class="settings-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">&times;</button>
  </div>
  <div class="setting-group">
    <label for="volumeRange">–ì—Ä–æ–º–∫–æ—Å—Ç—å: <span id="volumeValue">50%</span></label>
    <input type="range" id="volumeRange" min="0" max="100" step="1" value="50" />
  </div>
  <div class="setting-group">
    <label for="btnSoundsToggle"><input type="checkbox" id="btnSoundsToggle" checked /> –ó–≤—É–∫–∏ –∫–Ω–æ–ø–æ–∫</label>
  </div>
  <div class="setting-group">
    <label for="themeSelect">–¢–µ–º–∞:</label>
    <select id="themeSelect" aria-label="–í—ã–±–æ—Ä —Ç–µ–º—ã">
      <option value="dark">–¢—ë–º–Ω–∞—è</option>
      <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
      <option value="auto">–ê–≤—Ç–æ (–ø–æ –≤—Ä–µ–º–µ–Ω–∏)</option>
    </select>
  </div>
  <div class="setting-group">
    <label for="favoritesToggle"><input type="checkbox" id="favoritesToggle" /> –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã</label>
  </div>
</div>

<button class="btn-open-settings" aria-label="–û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏" 
  style="position: fixed; bottom: 20px; right: 20px; background:#00cc66; border:none; 
  padding: 12px 16px; border-radius: 12px; color:#001100; font-weight:700; cursor:pointer;
  box-shadow: 0 0 12px #00ff88;">
  ‚öôÔ∏è
</button>

<script>
(() => {
  const channelsData = [
    {name: '–ï–≤—Ä–æ–ø–∞ –ü–ª—é—Å', stream: 'https://ep128.hostingradio.ru:8050/ep128_mp3', color: '#2f61ff', id: 'europaplus'},
    {name: '–†—É—Å—Å–∫–æ–µ –†–∞–¥–∏–æ', stream: 'https://online.rusradio.ru:8000/rusradio256.mp3', color: '#d91f1f', id: 'rusradio'},
    {name: '–ê–≤—Ç–æ—Ä–∞–¥–∏–æ', stream: 'https://online.avtoradio.ru/autoradio256.mp3', color: '#ff7700', id: 'avtoradio'},
    {name: '–î–æ—Ä–æ–∂–Ω–æ–µ –†–∞–¥–∏–æ', stream: 'https://dorognoe.hostingradio.ru:8050/dorognoe128.mp3', color: '#239923', id: 'dorognoe'},
    {name: '–ù–∞—à–µ –†–∞–¥–∏–æ', stream: 'https://nashe1.hostingradio.ru:8050/nashe128.mp3', color: '#dd5500', id: 'nashe'},
    {name: '–†–∞–¥–∏–æ –î–∞—á–∞', stream: 'https://radio-dacha.hostingradio.ru:8050/radio_dacha_128.mp3', color: '#55aa00', id: 'radiodacha'},
    {name: 'Love Radio', stream: 'https://loveradio.hostingradio.ru:8050/loveradio128.mp3', color: '#ff4081', id: 'loveradio'},
    {name: 'DFM', stream: 'https://dfm.hostingradio.ru:8050/dfm128.mp3', color: '#9922ff', id: 'dfm'},
    {name: '–Æ–º–æ—Ä FM', stream: 'https://veseloeradio.hostingradio.ru:8050/veselo128.mp3', color: '#ffcc00', id: 'yumorfm'},
    {name: '–†–µ—Ç—Ä–æ FM', stream: 'https://retrofm.hostingradio.ru:8050/retro128.mp3', color: '#bb4400', id: 'retrofm'},
    {name: '–†–∞–¥–∏–æ –®–∞–Ω—Å–æ–Ω', stream: 'https://radioshanson.hostingradio.ru:8050/shanson128.mp3', color: '#772222', id: 'shanson'},
    {name: '–†–∞–¥–∏–æ –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ', stream: 'https://montecarlo.hostingradio.ru:8050/montecarlo128.mp3', color: '#0066cc', id: 'montecarlo'},
    {name: '–í–µ—Å—Ç–∏ FM', stream: 'https://radiovesti.hostingradio.ru:8050/vesti128.mp3', color: '#003366', id: 'vesti'},
    {name: '–†–∞–¥–∏–æ –†–æ—Å—Å–∏—è', stream: 'https://radiovesna.hostingradio.ru:8050/vesna128.mp3', color: '#0055aa', id: 'radiorossiya'},
    {name: '–†–∞–¥–∏–æ ENERGY', stream: 'https://energyfm.hostingradio.ru:8050/energy128.mp3', color: '#ff3300', id: 'energy'},
    {name: 'Comedy Radio', stream: 'https://comedy-radio.hostingradio.ru:8050/comedy128.mp3', color: '#007700', id: 'comedyradio'},
    {name: 'Like FM', stream: 'https://likefm.hostingradio.ru:8050/like128.mp3', color: '#33aaff', id: 'likefm'}
  ];

  let currentIndex = 0;
  let audio = new Audio();
  audio.crossOrigin = "anonymous";
  audio.preload = "none";
  let isPlaying = false;

  const btnPower = document.querySelector('.btn-power');
  const btnPrev = document.querySelectorAll('.btn-switch')[0];
  const btnNext = document.querySelectorAll('.btn-switch')[1];
  const channelsList = document.querySelector('.channels');
  const trackInfo = document.querySelector('.track-info');
  const settingsPanel = document.querySelector('.settings-panel');
  const btnOpenSettings = document.querySelector('.btn-open-settings');
  const btnCloseSettings = settingsPanel.querySelector('.settings-close');
  const volumeRange = document.getElementById('volumeRange');
  const volumeValue = document.getElementById('volumeValue');
  const btnSoundsToggle = document.getElementById('btnSoundsToggle');
  const themeSelect = document.getElementById('themeSelect');
  const favoritesToggle = document.getElementById('favoritesToggle');
  let buttonSound = null;

  // –ó–≤—É–∫–∏ –∫–Ω–æ–ø–æ–∫
  function loadButtonSound() {
    buttonSound = new Audio();
    buttonSound.src = "https://actions.google.com/sounds/v1/alarms/beep_short.ogg"; // —Ç–∏—Ö–∏–π –∑–≤—É–∫ –∫–ª–∏–∫–∞
    buttonSound.volume = 0.15;
  }
  loadButtonSound();

  function playButtonSound() {
    if (btnSoundsToggle.checked && buttonSound) {
      buttonSound.currentTime = 0;
      buttonSound.play().catch(() => {});
    }
  }

  // –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤
  function renderChannels() {
    channelsList.innerHTML = '';
    let filtered = channelsData;
    if (favoritesToggle.checked) {
      const favs = JSON.parse(localStorage.getItem('radioFavorites') || '[]');
      filtered = channelsData.filter(ch => favs.includes(ch.id));
      if(filtered.length === 0) {
        channelsList.innerHTML = '<i>–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤. –û—Ç–º–µ—Ç—å—Ç–µ –∫–∞–Ω–∞–ª—ã –∑–≤—ë–∑–¥–æ—á–∫–æ–π –≤ —Å–ø–∏—Å–∫–µ.</i>';
        return;
      }
    }
    filtered.forEach((ch, i) => {
      const div = document.createElement('div');
      div.classList.add('channel');
      if (i === currentIndex) div.classList.add('active');
      div.setAttribute('role', 'listitem');
      div.setAttribute('tabindex', 0);
      div.dataset.index = i;
      div.dataset.id = ch.id;

      div.innerHTML = `
        <div class="channel-color" style="background:${ch.color}"></div>
        ${ch.name}
        <button aria-label="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ" class="fav-btn" style="margin-left:auto; background:none; border:none; cursor:pointer; font-size:1.2rem;">
          ‚òÖ
        </button>
      `;

      const favBtn = div.querySelector('.fav-btn');
      updateFavStar(ch.id, favBtn);

      favBtn.addEventListener('click', e => {
        e.stopPropagation();
        toggleFavorite(ch.id, favBtn);
        playButtonSound();
      });

      div.addEventListener('click', () => {
        playButtonSound();
        playChannel(i);
      });

      div.addEventListener('keydown', e => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          playButtonSound();
          playChannel(i);
        }
      });

      channelsList.appendChild(div);
    });
  }

  // –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
  function toggleFavorite(id, btn) {
    let favs = JSON.parse(localStorage.getItem('radioFavorites') || '[]');
    if (favs.includes(id)) {
      favs = favs.filter(x => x !== id);
    } else {
      favs.push(id);
    }
    localStorage.setItem('radioFavorites', JSON.stringify(favs));
    updateFavStar(id, btn);
  }

  function updateFavStar(id, btn) {
    const favs = JSON.parse(localStorage.getItem('radioFavorites') || '[]');
    if (favs.includes(id)) {
      btn.textContent = '‚≠ê';
      btn.title = '–£–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ';
    } else {
      btn.textContent = '‚òÜ';
      btn.title = '–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ';
    }
  }

  // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∫–∞–Ω–∞–ª
  function playChannel(index) {
    if(index < 0) index = channelsData.length - 1;
    if(index >= channelsData.length) index = 0;
    currentIndex = index;

    // –ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏–∑–±—Ä–∞–Ω–Ω—ã–º –≤–∫–ª—é—á–µ–Ω, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–∞ –ø–æ–ª–Ω—ã–π –º–∞—Å—Å–∏–≤
    if (favoritesToggle.checked) {
      const favs = JSON.parse(localStorage.getItem('radioFavorites') || '[]');
      const filtered = channelsData.filter(ch => favs.includes(ch.id));
      if(filtered.length === 0) return;
      const ch = filtered[index];
      if(!ch) return;
      audio.src = ch.stream;
      trackInfo.textContent = `–°–ª—É—à–∞–µ—Ç–µ: ${ch.name}`;
    } else {
      const ch = channelsData[currentIndex];
      audio.src = ch.stream;
      trackInfo.textContent = `–°–ª—É—à–∞–µ—Ç–µ: ${ch.name}`;
    }

    audio.volume = volumeRange.value / 100;
    audio.play().catch(() => {});
    isPlaying = true;
    updateUI();
  }

  // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–¥–∏–æ
  function stopRadio() {
    audio.pause();
    isPlaying = false;
    updateUI();
    trackInfo.textContent = '';
  }

  // –û–±–Ω–æ–≤–∏—Ç—å UI –∫–Ω–æ–ø–æ–∫ –∏ —Å–ø–∏—Å–∫–æ–≤
  function updateUI() {
    btnPower.classList.toggle('active', isPlaying);
    btnPower.setAttribute('aria-pressed', isPlaying ? 'true' : 'false');
    btnPower.setAttribute('aria-label', isPlaying ? '–í—ã–∫–ª—é—á–∏—Ç—å —Ä–∞–¥–∏–æ' : '–í–∫–ª—é—á–∏—Ç—å —Ä–∞–¥–∏–æ');

    // –í—ã–¥–µ–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–Ω–∞–ª
    [...channelsList.children].forEach((el, i) => {
      el.classList.toggle('active', i === currentIndex);
    });
  }

  // –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤
  btnPrev.addEventListener('click', () => {
    playButtonSound();
    if (!isPlaying) return;
    playChannel(currentIndex - 1);
  });
  btnNext.addEventListener('click', () => {
    playButtonSound();
    if (!isPlaying) return;
    playChannel(currentIndex + 1);
  });

  // –í–∫–ª/–≤—ã–∫–ª —Ä–∞–¥–∏–æ
  btnPower.addEventListener('click', () => {
    playButtonSound();
    if (isPlaying) {
      stopRadio();
    } else {
      playChannel(currentIndex);
    }
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏
  volumeRange.addEventListener('input', () => {
    audio.volume = volumeRange.value / 100;
    volumeValue.textContent = volumeRange.value + '%';
  });

  // –ó–≤—É–∫–∏ –∫–Ω–æ–ø–æ–∫
  btnSoundsToggle.addEventListener('change', () => {
    if(!btnSoundsToggle.checked){
      buttonSound.pause();
      buttonSound.currentTime = 0;
    }
  });

  // –û—Ç–∫—Ä—ã—Ç—å –∏ –∑–∞–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  btnOpenSettings.addEventListener('click', () => {
    playButtonSound();
    settingsPanel.classList.add('open');
  });
  btnCloseSettings.addEventListener('click', () => {
    playButtonSound();
    settingsPanel.classList.remove('open');
  });

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
  function setTheme(theme) {
    if (theme === 'dark') {
      document.body.classList.remove('light');
      themeSelect.value = 'dark';
    } else if (theme === 'light') {
      document.body.classList.add('light');
      themeSelect.value = 'light';
    } else {
      // –∞–≤—Ç–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
      const hour = new Date().getHours();
      if (hour >= 7 && hour < 19) {
        document.body.classList.add('light');
      } else {
        document.body.classList.remove('light');
      }
      themeSelect.value = 'auto';
    }
  }

  themeSelect.addEventListener('change', () => {
    localStorage.setItem('radioTheme', themeSelect.value);
    setTheme(themeSelect.value);
  });

  // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
  favoritesToggle.addEventListener('change', () => {
    renderChannels();
    // –ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞ —Å–±—Ä–æ—Å–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å
    currentIndex = 0;
  });

  // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã —Å–≤–µ—Ä—Ö—É
  const themeToggleBtn = document.querySelector('.theme-toggle');
  themeToggleBtn.addEventListener('click', () => {
    playButtonSound();
    let cur = themeSelect.value;
    if(cur === 'dark') setTheme('light');
    else if(cur === 'light') setTheme('auto');
    else setTheme('dark');
    localStorage.setItem('radioTheme', themeSelect.value);
  });

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  function init() {
    const savedTheme = localStorage.getItem('radioTheme') || 'auto';
    setTheme(savedTheme);

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å
    const savedVol = localStorage.getItem('radioVolume');
    if (savedVol !== null) {
      volumeRange.value = savedVol;
      volumeValue.textContent = savedVol + '%';
      audio.volume = savedVol / 100;
    }

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–≤—É–∫ –∫–Ω–æ–ø–æ–∫
    const savedBtnSounds = localStorage.getItem('radioBtnSounds');
    if (savedBtnSounds !== null) {
      btnSoundsToggle.checked = savedBtnSounds === 'true';
    }

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
    renderChannels();

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∫–∞–∑ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö
    const savedFavsOnly = localStorage.getItem('radioFavsOnly');
    if(savedFavsOnly !== null){
      favoritesToggle.checked = savedFavsOnly === 'true';
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ localStorage
    volumeRange.addEventListener('change', () => {
      localStorage.setItem('radioVolume', volumeRange.value);
    });
    btnSoundsToggle.addEventListener('change', () => {
      localStorage.setItem('radioBtnSounds', btnSoundsToggle.checked);
    });
    favoritesToggle.addEventListener('change', () => {
      localStorage.setItem('radioFavsOnly', favoritesToggle.checked
